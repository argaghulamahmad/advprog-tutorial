# Tutorial 7: Declarative Programming

CSCM602023 Advanced Programming @ Faculty of Computer Science Universitas
Indonesia, Term 2 2017/2018

* * *

Your main task in this tutorial is to refactor several Java source that written
in imperative style into functional/declarative style. The initial starter code
contains partial tests that verify the correctness of the code. You also need to
implement unit tests that are left empty in the starter code.

The problem set used in this tutorial is based on example delivered in a talk
titled [Refactoring to Functional Style with Java 8 by Venkat Subramaniam](https://www.youtube.com/watch?v=wjF1WqGhoQI)
Please watch the talk and follow through the livecode to understand how the
starter code can be refactored into functional style.

The evaluation of your work will be based on number of passing unit tests,
code style issues, and your understanding on Java's functional programming
style applied in the tutorial. Code style issues can be checked from test
report generated by Gradle. Your understanding will be verified by teaching
team during in-person demo session and/or merge request review.

**Caution: Unless noted otherwise, you are not allowed to modify the _existing_
unit tests without permission from the teaching team!**

## Mandatory Tasks Description

There are 4 main exercises that you need to complete. The following are
description for each exercise:

### 1st Exercise: `PrimeChecker`

Your task in this exercise is to refactor `isPrime` static method in
`PrimeChecker` class to follow functional programming style and complete
the respective unit tests in `PrimeCheckerTest` class.

### 2nd Exercise: `WordCount`

Your task in this exercise is to refactor `countLines` static method in
`WordCount` class to follow functional programming style and complete the
respective unit tests in `WordCountTest` class.

### 3rd Exercise: `ScoreGrouping`

Your task in this exercise is to refactor `groupByScores` static method in
`ScoreGrouping` class to follow functional programming style and complete the
respective unit tests in `ScoreGroupingTest` class. Note that the are no
existing tests for `ScoreGrouping`, thus you need to develop your own tests.

### 4th Exercise: `Applicant`

Your task in this exercise is to refactor **Decorator pattern** implementation
in `applicant` package to use functional programming style by using Java's
`Predicate` functional interface. You also need to provide unit tests that
verify correctness of `evaluate` static method in `Applicant` class after
it has been refactored.

## Additional Tasks Description

Similar to the previous tutorial, you need to ensure that your code does not
contain any style/linter issues. You can run the linter (Checkstyle) by
executing `checkstyleMain` Gradle task. However, since you have begin writing
your own test, please ensure that the test code does not contain style issues
as well. You can check for lint issues in test code by executing
`checkstyleTest` Gradle task.

> Tips: You can also find Checkstyle plugin for your IDE of choice and let
> the plugin handle the checking. Do not forget to configure the plugin to
> use `google_csui_checks.xml` Checkstyle configuration in the `config`
> directory.

There are two additional tasks in this tutorial. The tasks are described in
following subsections.

### Before-and-After Comparison

After you finished all exercises, please compare the number of LOC (lines of
code) for each file that you modify before and after being refactored. Please
analyse and report your finding in [My Notes](#my-notes) section for the
following files:

- Java source code in `applicant` package
- `PrimeChecker.java`
- `ScoreGrouping.java`
- `WordCount.java`

### Reflect on Functional Programming Style

Please write a short paragraph (3 - 5 sentences) that describe your experience
in refactoring a codebase that previously written in imperative style into
functional style. You are allowed to write more than 1 paragraph.

## Running & Testing the Program

It is recommended to use IDE that can import Gradle-based project to complete this
tutorial. If you are using IDE, **please import `build.gradle` located in the
parent directory (root) of this tutorial.** The tutorials are structured as
Gradle multi-projects and the content of `build.gradle` in each tutorial
directories is defined in the main (root) `build.gradle` file.

> For Eclipse users: If you are using Eclipse, you might want to generate
> Eclipse project file for this tutorial and import it into Eclipse.
> Before starting the tutorial, you can invoke `gradle :tutorial-7:eclipse`
> to create the Eclipse project file.

You can run the unit tests by executing `test` Gradle task from your IDE. If you
prefer terminal/shell:

```bash
gradle :tutorial-7:test
```

> Explanation: Run `test` task available in `tutorial-6` Gradle (sub)project

If you want to run code linter (Checkstyle) to check find code style issues in
your work, execute `checkstyleMain` or `checkstyleTest` Gradle task from your IDE
or via terminal/shell:

```bash
gradle :tutorial-7:checkstyleMain
gradle :tutorial-7:checkstyleTest
```

> Explanation: Run `checkstyleMain` and `checkstyleTest` tasks available in
> `tutorial-7` Gradle (sub)project

> Tips: You can run both linter and unit tests sequentially by executing `check`
> Gradle task. If you prefer terminal/shell: `gradle :tutorial-7:check`

You can also create code coverage report by running `jacocoTestReport` Gradle
task after executing `check`. The report will be written in
`/build/reports/jacoco/test/html` as a HTML file.

```bash
gradle :tutorial-7:check
gradle :tutorial-7:jacocoTestReport
```

## Mandatory Tasks Checklist

- [x] Make sure that you have at least 1 commit for each exercises that contain
changes to the code after refactoring
- [x] Complete 1st exercise
- [x] Complete 2nd exercise
- [x] Complete 3rd exercise
- [x] Complete 4th exercise
- [x] Ensure the tests still pass after each refactoring
- [x] Push your commits to online Git repository on your GitLab project

## Additional Tasks Checklist

- [x] Make sure there are no code style issues, both in production code and
test code
- [x] Ensure 100% code coverage on all methods except `main` method after all
code has been refactored
- [x] Compare the number of LOC before and after refactoring and provide
a short analysis on the result
    - Write your analysis report in [My Notes](#my-notes) section in this
    document
- [x] Write a paragraph that describe your experience in refactoring codebase
into functional style
    - You are allowed to write more than the required paragraph
    - Write your answer in [My Notes](#my-notes) section in this document

## My Notes
### Compare result number of LOC before and after refactoring
| Exercise Name  | Before  | After  |
| ------------ | ------------ | ------------ |
| 1st | 8 lines  | 1 line |
| 2nd |  10 lines | 1 line |
| 3rd | 11 lines | 1 line |
| 4th |  > 14 lines | 9  lines |

Hasil refactor code dari imperative programming menjadi declarative programming menunjukan 
bahwa code hasil refactor lebih singkat daripada sebelum direfactor. Code hasil refactor 
lebih singkat karena tidak adanya penggunaan variable untuk iterasi. Ini terlihat pada exercise ke satu, dua, dan tiga.
Dengan menggunakan declarative programming style, variable iterasi dapat dieliminasi sehingga code hasil refactor menjadi
lebih singkat.

Selain itu, pada exercise ke empat. Kita tidak memerlukan lagi class-class yang mengimplement interface evaluator,
karena code yang menerapkan decorator pattern dapat diubah menjadi code dengan imperative style menggunakan Java
Predicate functional interface. Sehingga code hasil refactor tersebut lebih ringkas.

### Reflect on Functional Programming Style
Bahasa pemrograman Java merupakan bahasa pemrograman imperative dan objek oriented. Tetapi bahasa pemrograman 
java juga functional. Imperative programming merujuk kepada tipe paradigma dari suatu bahasa pemrograman. Imperative programming
diartikan sebagai menulis statement programming bagaimana untuk melakukan hal itu. Imperative programming
muncul karena adanya banyak fungsi dan library untuk masalah yang sudah umum kita temui. Sehingga saat kita 
menemui sebuah masalah yang telah disolve dan ditulis fungsi atau library nya, kita bisa hanya menggunakan
fungsi atau library tersebut. Sehingga code yang kita tulis dapat lebih ringkas.

Berdasarkan pengalaman saya merefactor code yang terdapat pada exercise 1st, 2nd, 3rd, dan 4th. Menggunakan functional programming sangat memudahkan kita menulis sebuah code, karena kita hanya menulis statement program saja bukan implementasinya. Sehingga, code yang kita tulis bisa lebih singkat daripada menulis code dalam imperative programming style.

Berikut keuntungan yang saya rasakan saat menulis code dalam imperative programming style
- Menguji code yang ditulis dalam imperative programming style lebih mudah.
- Mendebug code lebih mudah.
- Menulis code dalam higher level, dan code lebih mudah dipahami.